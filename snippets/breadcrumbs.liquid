{% if settings.show_breadcrumbs %}
  {% unless template.name == 'index' or template.name == 'cart' %}
    <nav class="breadcrumb" role="navigation" aria-label="breadcrumbs">
      <a href="{{ routes.root_url }}" title="{{ 'general.breadcrumbs.home_link_title' | t }}">
        {{- 'general.breadcrumbs.home' | t -}}
      </a>

      {% if template.name == 'product' %}
        {% assign current_collection = collection %}
        {% if current_collection == null %}
          {% assign current_collection = product.collections.first %}
        {% endif %}

        {% if current_collection %}
          {% if settings.show_breadcrumbs_collection_link %}
            <span class="breadcrumb__divider" aria-hidden="true">/</span>
            <a href="{{ routes.collections_url }}">{{ 'general.search.collections' | t | replace: ':', '' }}</a>
          {% endif %}

          <span class="breadcrumb__divider" aria-hidden="true">/</span>
          <a href="{{ current_collection.url }}">{{ current_collection.title }}</a>

          <span class="breadcrumb__divider" aria-hidden="true">/</span>
          <span class="last-child">{{ product.title }}</span>
        {% else %}
          <span class="breadcrumb__divider" aria-hidden="true">/</span>
          <span class="last-child">{{ product.title }}</span>
        {% endif %}

      {% elsif template.name == 'collection' and collection.handle %}
        {% if settings.show_breadcrumbs_collection_link %}
          <span class="breadcrumb__divider" aria-hidden="true">/</span>
          <a href="{{ routes.collections_url }}">{{ 'general.search.collections' | t | replace: ':', '' }}</a>
        {% endif %}

        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        <span>{{ collection.title }}</span>

        {% if current_tags %}
          <span class="breadcrumb__divider" aria-hidden="true">/</span>
          {% for tag in current_tags %}
            <span>{{ tag | capitalize }}</span>
            {% unless forloop.last %}
              <span class="breadcrumb__divider" aria-hidden="true">/</span>
            {% endunless %}
          {% endfor %}
        {% endif %}

      {% elsif template.name == 'blog' %}
        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        {{ blog.title | link_to: blog.url }}
        {% if current_tags %}
          <span class="breadcrumb__divider" aria-hidden="true">/</span>
          <span>{{ current_tags | join: ' + ' }}</span>
        {% endif %}

      {% elsif template.name == 'article' %}
        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        {{ blog.title | link_to: blog.url }}
        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        <span class="last-child">{{ article.title }}</span>

      {% elsif template.name == 'page' %}
        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        <span class="last-child">{{ page.title }}</span>

      {% elsif template.name == 'search' %}
        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        {% if search.results.size == 0 %}
          <span
            >Sorry, Nothing found for <b>"{{ search.terms }}"</b></span
          >
        {% else %}
          <span>{{ page_title | replace: '*', '' }}</span>
        {% endif %}

      {% else %}
        <span class="breadcrumb__divider" aria-hidden="true">/</span>
        <span class="last-child">{{ page_title }}</span>
      {% endif %}
    </nav>
  {% endunless %}
{% endif %}
